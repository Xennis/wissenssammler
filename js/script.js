jQuery(function(n){var o=n("html"),i=n("body");i.on("click",'[data-action="menu"], [data-action="toc"], [data-action="subscription"]',function(){n(this).data("action");t(n('[data-target="'+n(this).data("target")+'"]').not("[data-action]"))});var e=!1;function t(t){e=e?(t.removeClass("active"),o.removeClass("menu-active"),setTimeout(function(){t.removeClass("initial"),o.removeClass("menu-initial")},300),!1):(o.addClass("menu-initial"),t.addClass("initial"),setTimeout(function(){o.addClass("menu-active"),t.addClass("active")},1),!0)}function r(){n(".menu-list-item a").each(function(){var t=n(this);t.removeClass("current"),t.attr("href")==window.location.href&&t.addClass("current")})}function d(){n(".post-list .post .post-image img").each(function(){var t=n(this);t.load(function(){t.parents(".post-image").css({height:"0","padding-bottom":100/t.width()*t.height()+"%"})})});var t=n(".post-list").masonry({itemSelector:".post",isAnimated:!1,gutter:0,columnWidth:1,transitionDuration:0}).imagesLoaded().always(function(){t.masonry("layout")})}function l(){n("#wrapper").fitVids()}function c(){if("localhost"!=window.location.hostname)if("undefined"!=typeof disqus_shortname&&document.getElementById("disqus_thread")){if(window.DISQUS){n(".post-comments").show();var t=location.href;return"/"!==t.slice(-1)&&(t+="/"),DISQUS.reset({reload:!0,config:function(){this.page.identifier=t,this.page.url=t}})}n.ajax({type:"GET",url:"//"+disqus_shortname+".disqus.com/embed.js",dataType:"script",cache:!0}).done(function(){c()})}else n(".post-comments").hide()}function u(){n("[data-gist-id]").gist()}function h(){n('a[href^="'+window.location.origin+'"], .post-image a, .post-title a, .post-more a, .post-meta a, .post-tags a, #pagination a').each(function(){var t=n(this);t.hasClass("rss")||(t.addClass("js-ajax-link"),-1<t.attr("href").indexOf("page")&&t.addClass("js-archive-index"),t.attr("href")==window.location.origin&&t.addClass("js-show-index"),-1<t.attr("href").indexOf("tag")&&t.addClass("js-tag-index"),-1<t.attr("href").indexOf("author")&&t.addClass("js-author-index"))})}function f(){n(".blured-image").each(function(){var t=n(this),e=new Image;e.onload=function(){t.css("background-image","url("+e.src+")").addClass("blurUp").removeClass("filter-blur-15")},e.src=t.data("src")})}i.on("click","#menu a",function(){o.hasClass("menu-active")&&t(n('[data-target="menu"]').not("[data-action]"))}),i.on("click","#tocMenu a",function(){o.hasClass("menu-active")&&t(n('[data-target="toc"]').not("[data-action]"))}),i.on("click","#subscription",function(){o.hasClass("menu-active")&&t(n('[data-target="subscription"]').not("[data-action]"))}),i.on("click",".overlay",function(){o.hasClass("menu-active")&&t(n('[data-target="menu"].active,[data-target="toc"].active').not("[data-action]"))}),r(),d(),l(),c(),u(),h(),f();var m=window.History,p=!1,g=n("#ajax-container");if(n(document).ready(function(){var t=document.createElement("link");t.href=config.baseUrl+"/css/main.css",t.rel="stylesheet",t.type="text/css",t.media="bogus",t.onload=function(){t.media="all"},document.getElementsByTagName("head")[0].appendChild(t),n("#loader-wrapper").fadeOut(300),n("#wrapper").fadeIn(800)}),!m.enabled)return!1;m.Adapter.bind(window,"statechange",function(){o.addClass("loading");var t=m.getState();n.get(t.url,function(t){var e=n(t),a=n("#ajax-container",e).contents(),s=t.match(/<title>(.*?)<\/title>/)[1];g.fadeOut(500,function(){o.hasClass("push-next")&&(o.removeClass("push-next"),o.addClass("pushed-next")),o.hasClass("push-prev")&&(o.removeClass("push-prev"),o.addClass("pushed-prev")),document.title=n("<textarea/>").html(s).text(),g.html(a),i.removeClass(),i.addClass(n("#body-class").attr("class")),NProgress.done(),g.fadeIn(500),n(document).scrollTop(0),setTimeout(function(){o.removeClass("loading")},50),d(),h(),l(),c(),u(),r(),f(),p=!1})})}),n("body").on("click",".js-ajax-link",function(t){t.preventDefault();var e=n(this);if(e.hasClass("post-nav-item")||e.hasClass("pagination-item")?((e.hasClass("post-nav-next")||e.hasClass("pagination-next"))&&(o.removeClass("pushed-prev"),o.addClass("push-next")),(e.hasClass("post-nav-prev")||e.hasClass("pagination-prev"))&&(o.removeClass("pushed-next"),o.addClass("push-prev"))):(o.removeClass("pushed-next"),o.removeClass("pushed-prev")),!1===p){var a=m.getState(),s=n(this).prop("href"),i=n(this).attr("title")||null;s.replace(/\/$/,"")!==a.url.replace(/\/$/,"")&&(p=!0,o.addClass("loading"),NProgress.start(),m.pushState({},i,s))}}),n("body").on("click","#post-index .post .js-ajax-link",function(){var t=n(this).parents(".post");t.addClass("initial"),setTimeout(function(){t.addClass("active")},1)})}),function(v){"use strict";function C(t){var e,a,s=[];if("number"==typeof t)s.push(t);else{a=t.split(",");for(var i=0;i<a.length;i++)if(2===(e=a[i].split("-")).length)for(var n=parseInt(e[0],10);n<=e[1];n++)s.push(n);else 1===e.length&&s.push(parseInt(e[0],10))}return s}var y={};v.fn.gist=function(g){return this.each(function(){function e(t){var e,a,s,i,n;t&&t.div?(t.stylesheet&&(0===t.stylesheet.indexOf("<link")?t.stylesheet=t.stylesheet.replace(/\\/g,"").match(/href=\"([^\s]*)\"/)[1]:0!==t.stylesheet.indexOf("http")&&(0!==t.stylesheet.indexOf("/")&&(t.stylesheet="/"+t.stylesheet),t.stylesheet="https://gist.github.com"+t.stylesheet)),t.stylesheet&&0===v('link[href="'+t.stylesheet+'"]').length&&(e=document.createElement("link"),a=document.getElementsByTagName("head")[0],e.type="text/css",e.rel="stylesheet",e.href=t.stylesheet,a.insertBefore(e,a.firstChild)),(n=v(t.div)).removeAttr("id"),m.html("").append(n),d&&(i=C(d),n.find("td.line-data").css({width:"100%"}),n.find(".js-file-line").each(function(t){-1!==v.inArray(t+1,i)&&v(this).css({"background-color":"rgb(255, 255, 204)"})})),r&&(s=C(r),n.find(".js-file-line").each(function(t){-1===v.inArray(t+1,s)&&v(this).parent().remove()})),l&&(n.find(".gist-meta").remove(),n.find(".gist-data").css("border-bottom","0px"),n.find(".gist-file").css("border-bottom","1px solid #ddd")),c&&n.find(".js-line-number").remove()):m.html("Failed loading gist "+o)}function a(t){m.html("Failed loading gist "+o+": "+t)}function s(){"function"==typeof g&&g()}var t,o,i,r,n,d,l,c,u,h,f,m=v(this),p={};return m.css("display","block"),t=m.data("gist-id")||"",i=m.data("gist-file"),l=!0===m.data("gist-hide-footer"),c=!0===m.data("gist-hide-line-numbers"),r=m.data("gist-line"),d=m.data("gist-highlight-line"),u=!(h=!0===m.data("gist-show-spinner"))&&(void 0===m.data("gist-show-loading")||m.data("gist-show-loading")),i&&(p.file=i),!!t&&(o="https://gist.github.com/"+t+".json",f=!0===m.data("gist-enable-cache")||y[o],n="Loading gist "+o+(p.file?", file: "+p.file:"")+"...",u&&m.html(n),h&&m.html('<img style="display:block;margin-left:auto;margin-right:auto"  alt="'+n+'" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif">'),void v.ajax({url:o,data:p,dataType:"jsonp",timeout:2e4,beforeSend:function(){if(f){if(y[o])return y[o].then(function(t){e(t),s()},function(t){a(t)}),!1;y[o]=v.Deferred()}},success:function(t){f&&y[o]&&y[o].resolve(t),e(t)},error:function(t,e){a(e)},complete:function(){s()}}))})},v(function(){v("[data-gist-id]").gist()})}(jQuery);